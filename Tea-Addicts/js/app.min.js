import{initializeApp as e}from"https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";import{getFirestore as t,doc as o,getDoc as r,updateDoc as n,increment as a}from"https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";let firebaseConfig={apiKey:"AIzaSyA-czG_ZNvVlsYLK3TX64ALr2GzyZjBcY4",authDomain:"tea-addicts.firebaseapp.com",projectId:"tea-addicts",storageBucket:"tea-addicts.appspot.com",messagingSenderId:"363775085178",appId:"1:363775085178:web:6473e20d2fca64890dc9c3",measurementId:"G-MNN2F3VHPJ"},app=e(firebaseConfig),db=t(app),counterRef=o(db,"teaCounter","global"),teaCounter=document.getElementById("tea-counter"),sipButton=document.getElementById("sip-button"),errorMessage=document.getElementById("error-message"),sipSounds=[document.getElementById("sip-sound1"),document.getElementById("sip-sound2"),document.getElementById("sip-sound3")],localCounter=0;function updateCounter(e){teaCounter.textContent=e,teaCounter.style.transform="scale(1.2)",setTimeout(()=>teaCounter.style.transform="scale(1)",200)}function playRandomSipSound(){let e=sipSounds[Math.floor(Math.random()*sipSounds.length)];e.play()}function showError(e){errorMessage.textContent=e,errorMessage.classList.remove("hidden")}function fetchCounter(){r(counterRef).then(e=>{e.exists()?updateCounter(localCounter=e.data().count):showError("No such document!")}).catch(e=>{showError("Error getting document: "+e)})}sipButton.addEventListener("click",()=>{updateCounter(++localCounter),playRandomSipSound(),n(counterRef,{count:a(1)}).catch(e=>{showError("Error updating document: "+e),updateCounter(--localCounter)})}),window.addEventListener("load",fetchCounter);